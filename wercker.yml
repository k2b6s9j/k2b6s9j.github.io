box: wercker/rvm
# Build definition
steps:
  - wercker/bundle-install@1.1.1
build:
  # The steps that will be executed on build
  steps:
    - script:
        name: Checkout Master Branch into 'Build'
        code: git clone https://github.com/k2b6s9j/k2b6s9j.github.io build -b master
    - bundle-install
    - script:
        name: Build Static Site
        code: bundle exec middleman build --verbose
deploy:
  steps:
    - script:
        name: Set Git Attributes
        code: |
            cd build
            git config user.email "pleasemailus@wercker.com"
            git config user.name "werckerbot"
            git remote set-url origin https://$GIT_TOKEN@github.com/$WERCKER_GIT_OWNER/$WERCKER_GIT_REPOSITORY.git
    - script:
        name: Remove and Add the Appropriate Files
        code: cd build; git add -u .
    - script:
        name: Git Status
        code: cd build; git status
    - script:
        name: Git Commit
        code: cd build; git commit -m 'Auto deploy from $WERCKER_STARTED_BY' --allow-empty
    - script:
        name: Git Status
        code: cd build; git status
    - script:
        name: Git Push
        code: cd build; git push origin
    - script:
        name: Git Status
        code: cd build; git status
